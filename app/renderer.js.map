{
  "version": 3,
  "file": "renderer.js",
  "sourceRoot": "../src/",
  "sources": [
    "renderer.coffee"
  ],
  "names": [],
  "mappings": "AAAA;EAAA;AAAA,MAAA,eAAA,EAAA,IAAA,EAAA,YAAA,EAAA;;EAEA,CAAA,CAAC,eAAD,CAAA,GAAoB,OAAA,CAAQ,UAAR,CAApB;;EACA,YAAA,GAAe,OAAA,CAAQ,kBAAR;;EACf,KAAA,GAAQ,OAAA,CAAQ,SAAR;;EAER,IAAA,GACE;IAAA,IAAA,EAAM,OAAO,CAAC,GAAG,CAAC,WAAZ,IAA2B,qBAAjC;IACA,SAAA,EAAW,OAAO,CAAC,GAAG,CAAC,gBAAZ,IAAgC;EAD3C;;EAEF,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,IAApB;;EACA,MAAM,CAAC,MAAP,GAAgB,QAAA,CAAA,CAAA;AACd,QAAA;IAAA,EAAA,GAAK;WACL,eAAe,CAAC,UAAhB,CACE;MAAA,KAAA,EAAO,CAAC,QAAD,EAAW,QAAX;IAAP,CADF,EAEE,QAAA,CAAC,GAAD,EAAM,OAAN,CAAA;MACA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAmB,GAAnB;MACA,OAAO,CAAC,GAAR,CAAY,SAAZ,EAAuB,OAAvB;aACA,SAAS,CAAC,YAAY,CAAC,YAAvB,CACE;QAAA,KAAA,EAAO,KAAP;QACA,KAAA,EACE;UAAA,SAAA,EACE;YAAA,iBAAA,EAAmB,SAAnB;YACA,mBAAA,EAAqB,OAAQ,CAAA,CAAA,CAAE,CAAC;UADhC;QADF;MAFF,CADF,CAMA,CAAC,IAND,CAMM,QAAA,CAAC,MAAD,CAAA;AACJ,YAAA;QAAA,YAAA,CAAa,IAAI,CAAC,SAAlB,EACE;UAAA,IAAA,EAAM,IAAI,CAAC,IAAX;UACA,OAAA,EAAS;QADT,CADF,CAGA,CAAC,SAHD,CAGW,MAHX,CAIA,CAAC,iBAJD,CAImB,QAJnB,CAKA,CAAC,EALD,CAKI,uBALJ,EAK6B,QAAA,CAAC,EAAD,EAAK,GAAL,CAAA;UAC3B,EAAA,GAAK;UACL,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,EAA5B;UACA,EAAE,CAAC,SAAH,GAAe,QAAA,CAAC,GAAD,CAAA;mBACb,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,GAAG,CAAC,IAA/B,EAAqC,GAAG,CAAC,IAAI,CAAC,IAA9C;UADa,EAFf;;;;;iBAQA,EAAE,CAAC,IAAH,CAAQ,MAAR;QAT2B,CAL7B,CAeA,CAAC,EAfD,CAeI,cAfJ,EAeoB,QAAA,CAAC,EAAD,EAAK,EAAL,EAAS,IAAT,CAAA;iBAClB,OAAO,CAAC,GAAR,CAAY,WAAZ,EAAyB,EAAzB;QADkB,CAfpB;QAiBA,KAAA,GAAQ,QAAQ,CAAC,aAAT,CAAuB,OAAvB;QACR,KAAK,CAAC,SAAN,GAAkB;eAClB,KAAK,CAAC,gBAAN,GAAyB,QAAA,CAAC,CAAD,CAAA;iBACvB,KAAK,CAAC,IAAN,CAAA;QADuB;MApBrB,CANN;IAHA,CAFF;EAFc;;EAmChB,MAAM,CAAC,MAAP,GAAgB,QAAA,CAAA,CAAA;AACd,QAAA;IAAA,EAAA,GAAK;WACL,YAAA,CAAa,IAAI,CAAC,SAAlB,EACE;MAAA,IAAA,EAAM,IAAI,CAAC,IAAX;MACA,OAAA,EAAS;IADT,CADF,CAGA,CAAC,iBAHD,CAGmB,QAHnB,CAIA,CAAC,EAJD,CAII,uBAJJ,EAI6B,QAAA,CAAC,EAAD,EAAK,GAAL,CAAA;MAC3B,EAAA,GAAK;MACL,OAAO,CAAC,GAAR,CAAY,iBAAZ;aACA,EAAE,CAAC,SAAH,GAAe,QAAA,CAAC,GAAD,CAAA;eACb,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,IAAhB;MADa;IAHY,CAJ7B,CASA,CAAC,EATD,CASI,cATJ,EASoB,QAAA,CAAC,EAAD,EAAK,EAAL,EAAS,IAAT,CAAA;AAClB,UAAA;MAAA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAmB,EAAnB;MACA,KAAA,GAAQ,QAAQ,CAAC,aAAT,CAAuB,OAAvB;MACR,KAAK,CAAC,SAAN,GAAkB,EAAE,CAAC,gBAAH,CAAA,CAAsB,CAAA,CAAA;MACxC,KAAK,CAAC,gBAAN,GAAyB,QAAA,CAAC,CAAD,CAAA;eACvB,KAAK,CAAC,IAAN,CAAA;MADuB;aAEzB,KAAK,CAAC,WAAN,GAAoB,QAAA,CAAC,CAAD,CAAA;4BAClB,EAAE,CAAE,IAAJ,CACE;UAAA,IAAA,EAAM,WAAN;UACA,CAAA,EAAG,CAAC,CAAC,OADL;UAEA,CAAA,EAAG,CAAC,CAAC;QAFL,CADF;MADkB;IANF,CATpB;EAFc;AA7ChB",
  "sourcesContent": [
    "'use strict'\r\n\r\n{desktopCapturer} = require 'electron'\r\nquickconnect = require 'rtc-quickconnect'\r\nrobot = require 'robotjs'\r\n\r\nopts =\r\n  room: process.env.RSHARE_ROOM or 'ndxbxrme-rshare-123'\r\n  signaller: process.env.RSHARE_SIGNALLER or 'http://localhost:3000'\r\nconsole.log 'opts', opts\r\nwindow.master = ->\r\n  dc = null\r\n  desktopCapturer.getSources \r\n    types: ['screen', 'window']\r\n  , (err, sources) ->\r\n    console.log 'err', err\r\n    console.log 'sources', sources\r\n    navigator.mediaDevices.getUserMedia\r\n      audio: false\r\n      video:\r\n        mandatory:\r\n          chromeMediaSource: 'desktop'\r\n          chromeMediaSourceId: sources[1].id\r\n    .then (stream) ->\r\n      quickconnect opts.signaller,\r\n        room: opts.room\r\n        plugins: []\r\n      .addStream stream\r\n      .createDataChannel 'events'\r\n      .on 'channel:opened:events', (id, _dc) ->\r\n        dc = _dc\r\n        console.log 'channel open', id\r\n        dc.onmessage = (evt) ->\r\n          console.log 'got message', evt.data, evt.data.type\r\n          ###\r\n          if evt.data.type is 'mousemove'\r\n            robot.moveMouse evt.data.x, evt.data.y\r\n          ###\r\n        dc.send 'hiya'\r\n      .on 'call:started', (id, pc, data) ->\r\n        console.log 'talkin to', id\r\n      video = document.querySelector 'video'\r\n      video.srcObject = stream\r\n      video.onloadedmetadata = (e) ->\r\n        video.play()\r\nwindow.client = ->\r\n  dc = null\r\n  quickconnect opts.signaller,\r\n    room: opts.room\r\n    plugins: []\r\n  .createDataChannel 'events'\r\n  .on 'channel:opened:events', (id, _dc) ->\r\n    dc = _dc\r\n    console.log 'chizzannel open'\r\n    dc.onmessage = (evt) ->\r\n      console.log evt.data\r\n  .on 'call:started', (id, pc, data) ->\r\n    console.log 'hey', id\r\n    video = document.querySelector 'video'\r\n    video.srcObject = pc.getRemoteStreams()[0]\r\n    video.onloadedmetadata = (e) ->\r\n      video.play()\r\n    video.onmousemove = (e) ->\r\n      dc?.send\r\n        type: 'mousemove'\r\n        x: e.clientX\r\n        y: e.clientY"
  ]
}